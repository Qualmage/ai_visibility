<!-- CSS -->
/* Prompt Rankings Table Card */
.prompt-rankings-card {
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    overflow: hidden;
}

.prompt-rankings-card .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-xl) var(--spacing-2xl);
    border-bottom: 1px solid var(--color-border);
}

.prompt-rankings-card .card-title {
    font-family: var(--font-display);
    font-size: 16px;
    font-weight: 700;
    color: #333;
    display: flex;
    align-items: center;
    gap: 8px;
}

.prompt-rankings-card .tooltip-icon {
    position: relative;
    width: 18px;
    height: 18px;
    background: var(--color-accent-purple);
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: help;
    flex-shrink: 0;
}

.prompt-rankings-card .tooltip-icon span {
    color: white;
    font-size: 12px;
    font-weight: 700;
    line-height: 1;
}

.prompt-rankings-card .tooltip-text {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    top: 28px;
    left: 0;
    width: 280px;
    background: #333;
    color: white;
    font-family: var(--font-body);
    font-size: 12px;
    font-weight: 400;
    padding: 10px 12px;
    border-radius: 6px;
    line-height: 1.4;
    z-index: 100;
    transition: opacity 0.2s;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.prompt-rankings-card .tooltip-text::before {
    content: '';
    position: absolute;
    top: -6px;
    left: 12px;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-bottom: 6px solid #333;
}

.prompt-rankings-card .tooltip-icon:hover .tooltip-text {
    visibility: visible;
    opacity: 1;
}

.prompt-rankings-card .export-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    background: white;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    font-family: var(--font-body);
    font-size: 13px;
    color: var(--color-text-primary);
    cursor: pointer;
    transition: all 0.2s;
}

.prompt-rankings-card .export-btn:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

/* Table */
.prompt-rankings-card .table-wrapper {
    overflow-x: auto;
    max-height: 600px;
    overflow-y: auto;
}

.prompt-rankings-card .table-wrapper thead {
    position: sticky;
    top: 0;
    z-index: 10;
}

.rankings-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
}

.rankings-table th {
    background: #f9fafb;
    padding: 12px 16px;
    text-align: left;
    font-size: 11px;
    font-weight: 600;
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 1px solid var(--color-border);
    white-space: nowrap;
}

.rankings-table th.sortable {
    cursor: pointer;
    user-select: none;
}

.rankings-table th.sortable:hover {
    color: var(--color-primary);
}

.rankings-table th .sort-icon {
    margin-left: 4px;
    opacity: 0.4;
}

.rankings-table td {
    padding: 14px 16px;
    border-bottom: 1px solid var(--color-border);
    vertical-align: middle;
}

.rankings-table tbody tr:hover {
    background: #f9fafb;
}

/* Column group headers */
.rankings-table .col-group-header {
    text-align: center !important;
    background: #f3f4f6 !important;
    border-left: 2px solid var(--color-border);
}

.rankings-table .col-subheader {
    font-size: 10px !important;
    font-weight: 500 !important;
    text-transform: none !important;
    letter-spacing: 0 !important;
}

.rankings-table .border-left {
    border-left: 2px solid var(--color-border);
}

/* Prompt column */
.rankings-table .prompt-link {
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 500;
    display: block;
    max-width: 260px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.rankings-table .prompt-link:hover {
    text-decoration: underline;
}

/* Model icon */
.rankings-table .model-icon {
    width: 26px;
    height: 26px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 700;
    color: white;
}

.rankings-table .model-icon.chatgpt { background: #10a37f; }
.rankings-table .model-icon.gemini { background: #4285f4; }
.rankings-table .model-icon.perplexity { background: #1a1a2e; }
.rankings-table .model-icon.ai-overview { background: #ea4335; }

/* Topic */
.rankings-table .topic-text {
    max-width: 160px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: var(--color-text-secondary);
}

/* Volume */
.rankings-table .volume-value {
    font-weight: 600;
    color: var(--color-text-primary);
}

/* Visibility bar */
.rankings-table .visibility-cell {
    min-width: 110px;
}

.rankings-table .visibility-bar {
    display: flex;
    align-items: center;
    gap: 10px;
}

.rankings-table .visibility-bar-bg {
    flex: 1;
    height: 8px;
    background: #e5e7eb;
    border-radius: 4px;
    overflow: hidden;
}

.rankings-table .visibility-bar-fill {
    height: 100%;
    background: var(--color-primary);
    border-radius: 4px;
    transition: width 0.3s;
}

.rankings-table .visibility-value {
    font-size: 12px;
    font-weight: 600;
    min-width: 38px;
    text-align: right;
}

/* Position values */
.rankings-table .position-value {
    font-weight: 600;
    text-align: center;
    display: block;
}

.rankings-table .position-value.top-3 { color: var(--color-positive); }
.rankings-table .position-value.mid { color: var(--color-warning); }
.rankings-table .position-value.low { color: var(--color-text-secondary); }

.rankings-table .position-na {
    color: var(--color-text-muted);
    text-align: center;
    display: block;
}

/* Position change */
.rankings-table .position-change {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    padding: 3px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
}

.rankings-table .position-change.up {
    color: var(--color-positive);
    background: rgba(16, 185, 129, 0.1);
}

.rankings-table .position-change.down {
    color: var(--color-negative);
    background: rgba(239, 68, 68, 0.1);
}

.rankings-table .position-change.neutral {
    color: var(--color-text-muted);
    background: #f3f4f6;
}

.rankings-table .position-change.new {
    color: var(--color-primary);
    background: rgba(20, 40, 160, 0.1);
}

.rankings-table .position-change.lost {
    color: var(--color-negative);
    background: rgba(239, 68, 68, 0.1);
}

/* Product names */
.rankings-table .product-name {
    font-size: 12px;
    max-width: 140px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    display: block;
}

.rankings-table .product-samsung {
    color: var(--color-primary);
    font-weight: 600;
}

.rankings-table .product-competitor {
    color: var(--color-text-secondary);
}

.rankings-table .product-na {
    color: var(--color-text-muted);
}
<!-- END CSS -->

<!-- HTML -->
<div class="container">
    <div class="prompt-rankings-card">
    <div class="card-header">
        <div class="card-title">
            Prompt Rankings (Top Products)
            <div class="tooltip-icon">
                <span>?</span>
                <div class="tooltip-text">Shows prompt performance over time including visibility, position rankings, and top products mentioned. Samsung products are highlighted in blue.</div>
            </div>
        </div>
        <button class="export-btn">
            <span>↓</span> Export
        </button>
    </div>

    <div class="table-wrapper">
        <table class="rankings-table">
            <thead>
                <tr>
                    <th class="sortable">Prompt <span class="sort-icon">↕</span></th>
                    <th>Model</th>
                    <th class="sortable">Topic <span class="sort-icon">↕</span></th>
                    <th class="sortable">Topic Vol. <span class="sort-icon">↕</span></th>
                    <th class="sortable">Visibility <span class="sort-icon">↕</span></th>
                    <th class="col-group-header" colspan="2">Position</th>
                    <th>Change</th>
                    <th class="col-group-header" colspan="2">Product</th>
                </tr>
                <tr>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th class="col-subheader border-left">Dec 10, 2023</th>
                    <th class="col-subheader">Jan 8, 2025</th>
                    <th></th>
                    <th class="col-subheader border-left">Dec 10, 2023</th>
                    <th class="col-subheader">Jan 8, 2025</th>
                </tr>
            </thead>
            <tbody id="rankings-body">
                <!-- Populated by JavaScript -->
            </tbody>
        </table>
    </div>
    </div>
</div>
<!-- END HTML -->

<!-- SCRIPT -->
// Sample prompt rankings data with categories for filtering
const promptRankingsData = [
    { prompt: "what tv should I buy?", model: "chatgpt", topic: "TV Purchase and Specification", topicVolume: 5324, visibility: 89, positionPrev: null, positionCurr: 3, change: "new", productPrev: null, productCurr: { name: "OLED S90F 4K TV", isSamsung: true }, categories: ["TV Reviews & Brand", "Buying Guides"] },
    { prompt: "What are the best OLED TVs available right now?", model: "chatgpt", topic: "OLED TV Comparison", topicVolume: 4890, visibility: 94, positionPrev: 3, positionCurr: 3, change: "up", changeValue: 1, productPrev: { name: "OLED 4K S95F TV", isSamsung: true }, productCurr: { name: "OLED 4K S90F TV", isSamsung: true }, categories: ["TV Models", "OLED", "TV Reviews & Brand", "Best Of"] },
    { prompt: "What are the most reliable OLED TVs for movie lovers?", model: "chatgpt", topic: "OLED TV Comparison", topicVolume: 4890, visibility: 92, positionPrev: 1, positionCurr: 4, change: "down", changeValue: 3, productPrev: { name: "OLED 4K S95F TV", isSamsung: true }, productCurr: { name: "OLED 4K S90F TV", isSamsung: true }, categories: ["TV Models", "OLED", "Movies & Cinema"] },
    { prompt: "Which TVs offer both OLED and 4K resolution?", model: "gemini", topic: "OLED TV Models Comparison", topicVolume: 4820, visibility: 85, positionPrev: 4, positionCurr: 4, change: "neutral", productPrev: { name: "S95F OLED", isSamsung: true }, productCurr: { name: "OLED 4K S90F TV", isSamsung: true }, categories: ["TV Models", "OLED", "TV Features", "Resolution"] },
    { prompt: "Which TVs are best for bright rooms: OLED or mini LED?", model: "chatgpt", topic: "QD Mini-LED TVs", topicVolume: 4354, visibility: 81, positionPrev: 9, positionCurr: 7, change: "up", changeValue: 2, productPrev: { name: "S95F OLED TV", isSamsung: true }, productCurr: { name: "Neo OLED", isSamsung: true }, categories: ["TV Models", "Mini-LED", "OLED", "TV Features", "Brightness"] },
    { prompt: "What are the best reviewed mini LED TVs?", model: "perplexity", topic: "RGB LED and Mini-LED TVs", topicVolume: 4210, visibility: 78, positionPrev: null, positionCurr: 8, change: "new", productPrev: null, productCurr: { name: "Neo OLED Mini-LED TV", isSamsung: true }, categories: ["TV Models", "Mini-LED", "TV Reviews & Brand", "Best Of"] },
    { prompt: "What are the main differences between OLED and mini LED TVs?", model: "ai-overview", topic: "RGB LED and Mini-LED TVs", topicVolume: 4210, visibility: 71, positionPrev: 1, positionCurr: null, change: "lost", productPrev: { name: "LG OLED C3", isSamsung: false }, productCurr: null, categories: ["TV Models", "Mini-LED", "OLED", "TV Reviews & Brand", "Comparison"] },
    { prompt: "What are the most recommended gaming TVs for new consoles?", model: "chatgpt", topic: "Elite TVs and HD TVs", topicVolume: 3794, visibility: 88, positionPrev: 3, positionCurr: 6, change: "down", changeValue: 3, productPrev: { name: "S95F QD-OLED", isSamsung: true }, productCurr: { name: "Neo OLED QN70F 144Hz TV", isSamsung: true }, categories: ["TV Models", "Gaming TVs", "TV Reviews & Brand", "Best Of"] },
    { prompt: "Which gaming TVs are best for PS5 or Xbox Series X?", model: "gemini", topic: "4K TVs with FreeSync", topicVolume: 3738, visibility: 82, positionPrev: 1, positionCurr: 2, change: "down", changeValue: 1, productPrev: { name: "S90F OLED 4K TV", isSamsung: true }, productCurr: { name: "OLED 4K S90F TV", isSamsung: true }, categories: ["TV Models", "Gaming TVs", "TV Features", "Refresh Rate"] },
    { prompt: "What are the differences between mini LED and micro RGB TVs?", model: "chatgpt", topic: "LG Micro LED and Large TV", topicVolume: 3067, visibility: 68, positionPrev: 3, positionCurr: 1, change: "up", changeValue: 2, productPrev: null, productCurr: { name: "Micro RGB", isSamsung: true }, categories: ["TV Models", "Mini-LED", "Micro RGB", "TV Reviews & Brand", "Comparison"] },
    { prompt: "Best 75 inch TV for sports watching", model: "chatgpt", topic: "Sports TVs", topicVolume: 3521, visibility: 86, positionPrev: 2, positionCurr: 2, change: "neutral", productPrev: { name: "QN90B Neo QLED", isSamsung: true }, productCurr: { name: "QN90C Neo QLED", isSamsung: true }, categories: ["TV Models", "Sports TVs", "TV Sizes", "Large Size"] },
    { prompt: "Best QLED TV 2026", model: "chatgpt", topic: "QLED Reviews", topicVolume: 4102, visibility: 91, positionPrev: 1, positionCurr: 1, change: "neutral", productPrev: { name: "Samsung Q80B", isSamsung: true }, productCurr: { name: "Samsung Q80C", isSamsung: true }, categories: ["TV Models", "QLED", "TV Reviews & Brand", "Best Of", "Year Reviews"] },
    { prompt: "Is QLED better than OLED for bright rooms?", model: "gemini", topic: "QLED vs OLED", topicVolume: 3845, visibility: 79, positionPrev: 5, positionCurr: 3, change: "up", changeValue: 2, productPrev: { name: "Samsung QN85B", isSamsung: true }, productCurr: { name: "Samsung QN85C", isSamsung: true }, categories: ["TV Models", "QLED", "OLED", "TV Features", "Brightness", "TV Reviews & Brand", "Comparison"] },
    { prompt: "Best TV for HDR gaming", model: "perplexity", topic: "HDR Gaming TVs", topicVolume: 2987, visibility: 74, positionPrev: 6, positionCurr: 4, change: "up", changeValue: 2, productPrev: { name: "LG C2 OLED", isSamsung: false }, productCurr: { name: "Samsung S95C", isSamsung: true }, categories: ["TV Models", "Gaming TVs", "TV Features", "HDR"] },
    { prompt: "55 inch vs 65 inch TV for living room", model: "ai-overview", topic: "TV Size Guide", topicVolume: 4521, visibility: 83, positionPrev: 2, positionCurr: 2, change: "neutral", productPrev: { name: "Samsung QN65Q80B", isSamsung: true }, productCurr: { name: "Samsung QN65Q80C", isSamsung: true }, categories: ["TV Sizes", "Medium Size", "TV Reviews & Brand", "Buying Guides"] },
    { prompt: "Best anti-glare TV for sunny rooms", model: "chatgpt", topic: "Anti-Glare Technology", topicVolume: 2654, visibility: 77, positionPrev: 4, positionCurr: 3, change: "up", changeValue: 1, productPrev: { name: "Samsung S95B", isSamsung: true }, productCurr: { name: "Samsung S95C", isSamsung: true }, categories: ["TV Features", "Anti-Glare", "Brightness", "TV Reviews & Brand", "Best Of"] },
    { prompt: "120Hz vs 144Hz for gaming TV", model: "gemini", topic: "Refresh Rate Guide", topicVolume: 2341, visibility: 72, positionPrev: 7, positionCurr: 5, change: "up", changeValue: 2, productPrev: { name: "Samsung QN90B", isSamsung: true }, productCurr: { name: "Samsung QN90C", isSamsung: true }, categories: ["TV Features", "Refresh Rate", "TV Models", "Gaming TVs"] },
    { prompt: "Best 85 inch TV 2026", model: "chatgpt", topic: "Large TVs", topicVolume: 1987, visibility: 69, positionPrev: null, positionCurr: 6, change: "new", productPrev: null, productCurr: { name: "Samsung QN85QN90C", isSamsung: true }, categories: ["TV Sizes", "Large Size", "TV Reviews & Brand", "Best Of", "Year Reviews"] },
    { prompt: "Samsung The Frame TV reviews 2026", model: "perplexity", topic: "Samsung Brand Reviews", topicVolume: 3124, visibility: 85, positionPrev: 1, positionCurr: 1, change: "neutral", productPrev: { name: "The Frame 2024", isSamsung: true }, productCurr: { name: "The Frame 2025", isSamsung: true }, categories: ["TV Reviews & Brand", "Brand", "Brand TV Model Reviews"] },
    { prompt: "Best budget 4K TV under $500", model: "ai-overview", topic: "Budget TVs", topicVolume: 5102, visibility: 81, positionPrev: 3, positionCurr: 4, change: "down", changeValue: 1, productPrev: { name: "TCL 5-Series", isSamsung: false }, productCurr: { name: "Samsung CU7000", isSamsung: true }, categories: ["TV Reviews & Brand", "Affordable", "TV Features", "Resolution"] }
];

// Prompt Rankings Table initialization
(function() {
    const modelIcons = {
        chatgpt: '<div class="model-icon chatgpt" title="ChatGPT">G</div>',
        gemini: '<div class="model-icon gemini" title="Gemini">G</div>',
        perplexity: '<div class="model-icon perplexity" title="Perplexity">P</div>',
        "ai-overview": '<div class="model-icon ai-overview" title="AI Overview">A</div>'
    };

    function getPositionClass(pos) {
        if (pos === null) return '';
        if (pos <= 3) return 'top-3';
        if (pos <= 6) return 'mid';
        return 'low';
    }

    function formatPosition(pos) {
        if (pos === null) return '<span class="position-na">—</span>';
        return `<span class="position-value ${getPositionClass(pos)}">${pos}</span>`;
    }

    function formatChange(row) {
        if (row.change === 'new') return '<span class="position-change new">New</span>';
        if (row.change === 'lost') return '<span class="position-change lost">Lost</span>';
        if (row.change === 'neutral') return '<span class="position-change neutral">—</span>';
        if (row.change === 'up') return `<span class="position-change up">▲ ${row.changeValue}</span>`;
        if (row.change === 'down') return `<span class="position-change down">▼ ${row.changeValue}</span>`;
        return '';
    }

    function formatProduct(product) {
        if (!product) return '<span class="product-na">—</span>';
        const className = product.isSamsung ? 'product-samsung' : 'product-competitor';
        return `<span class="product-name ${className}" title="${product.name}">${product.name}</span>`;
    }

    // Global render function that can be called with filter
    window.renderRankingsTable = function(filter = null) {
        const tbody = document.getElementById('rankings-body');
        let filteredData = promptRankingsData;

        if (filter && filter !== 'All Categories') {
            filteredData = promptRankingsData.filter(row =>
                row.categories.some(cat => cat === filter || cat.includes(filter))
            );
        }

        tbody.innerHTML = filteredData.map(row => `
            <tr>
                <td><a href="#" class="prompt-link" title="${row.prompt}">${row.prompt}</a></td>
                <td>${modelIcons[row.model]}</td>
                <td><span class="topic-text" title="${row.topic}">${row.topic}</span></td>
                <td><span class="volume-value">${row.topicVolume.toLocaleString()}</span></td>
                <td class="visibility-cell">
                    <div class="visibility-bar">
                        <div class="visibility-bar-bg">
                            <div class="visibility-bar-fill" style="width: ${row.visibility}%"></div>
                        </div>
                        <span class="visibility-value">${row.visibility}%</span>
                    </div>
                </td>
                <td class="border-left">${formatPosition(row.positionPrev)}</td>
                <td>${formatPosition(row.positionCurr)}</td>
                <td>${formatChange(row)}</td>
                <td class="border-left">${formatProduct(row.productPrev)}</td>
                <td>${formatProduct(row.productCurr)}</td>
            </tr>
        `).join('');

        // Update count if element exists
        const countEl = document.querySelector('.prompt-rankings-card .filter-count');
        if (countEl) {
            countEl.textContent = `${filteredData.length} prompts`;
        }
    };

    // Initial render
    window.renderRankingsTable();
})();
<!-- END SCRIPT -->
