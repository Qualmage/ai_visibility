<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenAI Traffic | Scene Setting - Samsung HE</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="../css/slides.css">
    <style>
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }
        .metric-card {
            background: var(--color-bg-section);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        .metric-card .value {
            font-family: var(--font-display);
            font-size: 36px;
            font-weight: 700;
            color: var(--color-primary);
        }
        .metric-card .value.highlight {
            color: #01c3b0;
        }
        .metric-card .label {
            font-size: 16px;
            color: var(--color-text-secondary);
            margin-top: 4px;
        }
        .metric-card .sublabel {
            font-size: 14px;
            color: #999;
            margin-top: 2px;
        }
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }
        .stacked-bar-container {
            background: var(--color-bg-section);
            border-radius: 8px;
            padding: 20px;
        }
        .stacked-bar-container h3 {
            font-family: var(--font-display);
            font-size: 18px;
            margin-bottom: 16px;
            color: var(--color-text-primary);
        }
        .callout-box {
            background: linear-gradient(135deg, #f0f7ff 0%, #e8f4fd 100%);
            border-left: 4px solid var(--color-primary);
            border-radius: 8px;
            padding: 16px 20px;
            margin-top: 20px;
        }
        .callout-box .callout-title {
            font-family: var(--font-display);
            font-size: 16px;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 8px;
        }
        .callout-box .callout-text {
            font-size: 14px;
            line-height: 1.5;
            color: var(--color-text-primary);
        }
        .tracking-note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 8px;
            padding: 14px 18px;
            margin-top: 16px;
        }
        .tracking-note .note-title {
            font-family: var(--font-display);
            font-size: 12px;
            font-weight: 700;
            color: #856404;
            margin-bottom: 6px;
        }
        .tracking-note .note-text {
            font-size: 11px;
            line-height: 1.5;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="slide-container">
        <header class="slide-header">
            <div>
                <h1>GenAI Traffic<span class="subtitle">Scene Setting</span></h1>
            </div>
            <span class="slide-badge">Home Entertainment | Jan 2026</span>
        </header>

        <div class="slide-content">
            <!-- Key Metrics -->
            <div class="metric-grid">
                <div class="metric-card">
                    <div class="value">2.5M</div>
                    <div class="label">Total Organic Visits</div>
                    <div class="sublabel">Sep 2025 - Jan 2026</div>
                </div>
                <div class="metric-card">
                    <div class="value highlight">86.5K</div>
                    <div class="label">GenAI Visits</div>
                    <div class="sublabel">Incremental Traffic</div>
                </div>
                <div class="metric-card">
                    <div class="value">3.4%</div>
                    <div class="label">GenAI Share</div>
                    <div class="sublabel">Of Total HE Traffic</div>
                </div>
            </div>

            <div class="comparison-container">
                <!-- Monthly Proportion Chart -->
                <div class="stacked-bar-container">
                    <h3>GenAI as Proportion of Total Traffic</h3>
                    <div id="proportion-chart" class="chart-container" style="min-height: 420px;"></div>
                </div>

                <!-- CVR Comparison -->
                <div class="stacked-bar-container">
                    <h3>Conversion Rate Comparison</h3>
                    <div id="cvr-chart" class="chart-container" style="min-height: 280px;"></div>

                    <div class="callout-box">
                        <div class="callout-title">Why GenAI Converts 3x Better</div>
                        <div class="callout-text">
                            Users arriving via AI assistants have already researched and received recommendations.
                            They arrive with <strong>qualified intent</strong> - industry studies show AI-referred
                            traffic converts 2-4x higher than traditional organic search.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tracking Note -->
            <div class="tracking-note">
                <div class="note-title">GenAI Attribution Method</div>
                <div class="note-text">
                    GenAI visits include both <strong>identifiable referrers</strong> (ChatGPT, Perplexity, etc.) and
                    <strong>direct traffic</strong> attributed via landing page patterns. AI platforms often strip referrer data,
                    so direct attribution captures traffic that would otherwise be invisible.
                </div>
            </div>
        </div>
    </div>

    <script>
        // Monthly data for proportion visualization
        const monthlyData = [
            { month: 'Sep 2025', organic: 496082, genai: 10310, genaiPct: 2.04 },
            { month: 'Oct 2025', organic: 504524, genai: 16166, genaiPct: 3.10 },
            { month: 'Nov 2025', organic: 549732, genai: 31136, genaiPct: 5.36 },
            { month: 'Dec 2025', organic: 449317, genai: 16680, genaiPct: 3.58 },
            { month: 'Jan 2026', organic: 445948, genai: 12242, genaiPct: 2.67 }
        ];

        // CVR comparison data
        const cvrData = [
            { channel: 'Organic', cvr: 0.32, color: '#1428A0' },
            { channel: 'GenAI', cvr: 0.96, color: '#01c3b0' }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            renderProportionChart();
            renderCVRChart();
        });

        function renderProportionChart() {
            const container = document.getElementById('proportion-chart');
            const width = container.clientWidth;
            const height = 420;
            const margin = { top: 25, right: 80, bottom: 40, left: 55 };
            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const svg = d3.select('#proportion-chart')
                .append('svg')
                .attr('width', width)
                .attr('height', height);

            const chart = svg.append('g')
                .attr('transform', `translate(${margin.left}, ${margin.top})`);

            // Scales
            const x = d3.scaleBand()
                .domain(monthlyData.map(d => d.month))
                .range([0, chartWidth])
                .padding(0.15);

            const yMax = d3.max(monthlyData, d => d.organic + d.genai);
            const y = d3.scaleLinear()
                .domain([0, yMax])
                .range([chartHeight, 0]);

            // X axis
            chart.append('g')
                .attr('transform', `translate(0, ${chartHeight})`)
                .call(d3.axisBottom(x))
                .selectAll('text')
                .style('font-family', 'Samsung One, sans-serif')
                .style('font-size', '12px');

            // Y axis
            chart.append('g')
                .call(d3.axisLeft(y).ticks(5).tickFormat(d => (d / 1000) + 'K'))
                .selectAll('text')
                .style('font-family', 'Samsung One, sans-serif')
                .style('font-size', '12px');

            // Stacked bars
            monthlyData.forEach(d => {
                // Organic bar (bottom portion, from 0 to organic value)
                chart.append('rect')
                    .attr('x', x(d.month))
                    .attr('y', y(d.organic))
                    .attr('width', x.bandwidth())
                    .attr('height', chartHeight - y(d.organic))
                    .attr('fill', '#1428A0')
                    .attr('opacity', 0.8);

                // GenAI bar (top portion, stacked on organic)
                chart.append('rect')
                    .attr('x', x(d.month))
                    .attr('y', y(d.organic + d.genai))
                    .attr('width', x.bandwidth())
                    .attr('height', y(d.organic) - y(d.organic + d.genai))
                    .attr('fill', '#01c3b0');

                // Percentage label
                chart.append('text')
                    .attr('x', x(d.month) + x.bandwidth() / 2)
                    .attr('y', y(d.organic + d.genai) - 5)
                    .attr('text-anchor', 'middle')
                    .style('font-family', 'Samsung One, sans-serif')
                    .style('font-size', '13px')
                    .style('font-weight', '600')
                    .style('fill', '#01c3b0')
                    .text(d.genaiPct.toFixed(1) + '%');
            });

            // Legend
            const legend = svg.append('g')
                .attr('transform', `translate(${width - 70}, 20)`);

            legend.append('rect').attr('width', 12).attr('height', 12).attr('fill', '#1428A0').attr('opacity', 0.8);
            legend.append('text').attr('x', 16).attr('y', 10).style('font-size', '12px').text('Organic');

            legend.append('rect').attr('y', 18).attr('width', 12).attr('height', 12).attr('fill', '#01c3b0');
            legend.append('text').attr('x', 16).attr('y', 28).style('font-size', '12px').text('GenAI');
        }

        function renderCVRChart() {
            const container = document.getElementById('cvr-chart');
            const width = container.clientWidth;
            const height = 280;
            const margin = { top: 20, right: 90, bottom: 50, left: 90 };
            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const svg = d3.select('#cvr-chart')
                .append('svg')
                .attr('width', width)
                .attr('height', height);

            const chart = svg.append('g')
                .attr('transform', `translate(${margin.left}, ${margin.top})`);

            const barHeight = 65;
            const barGap = 40;
            const maxCVR = 1.0;

            cvrData.forEach((d, i) => {
                const y = i * (barHeight + barGap) + 10;
                const barWidth = (d.cvr / maxCVR) * chartWidth;

                // Label
                chart.append('text')
                    .attr('x', -10)
                    .attr('y', y + barHeight / 2)
                    .attr('text-anchor', 'end')
                    .attr('dominant-baseline', 'middle')
                    .style('font-family', 'Samsung One, sans-serif')
                    .style('font-size', '16px')
                    .style('font-weight', '600')
                    .style('fill', d.color)
                    .text(d.channel);

                // Background
                chart.append('rect')
                    .attr('x', 0)
                    .attr('y', y)
                    .attr('width', chartWidth)
                    .attr('height', barHeight)
                    .attr('fill', '#f0f0f0')
                    .attr('rx', 6);

                // Value bar
                chart.append('rect')
                    .attr('x', 0)
                    .attr('y', y)
                    .attr('width', barWidth)
                    .attr('height', barHeight)
                    .attr('fill', d.color)
                    .attr('rx', 6);

                // CVR value
                chart.append('text')
                    .attr('x', chartWidth + 10)
                    .attr('y', y + barHeight / 2)
                    .attr('dominant-baseline', 'middle')
                    .style('font-family', 'Samsung Sharp Sans, sans-serif')
                    .style('font-size', '28px')
                    .style('font-weight', '700')
                    .style('fill', d.color)
                    .text(d.cvr.toFixed(2) + '%');
            });

            // 3x lift annotation - position relative to bars, not SVG height
            const lastBarBottom = 1 * (barHeight + barGap) + 10 + barHeight;
            chart.append('text')
                .attr('x', chartWidth / 2)
                .attr('y', lastBarBottom + 35)
                .attr('text-anchor', 'middle')
                .style('font-family', 'Samsung Sharp Sans, sans-serif')
                .style('font-size', '22px')
                .style('font-weight', '700')
                .style('fill', '#01c3b0')
                .text('3x Higher Conversion');
        }
    </script>
</body>
</html>
