<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenAI Traffic | Source Breakdown - Samsung HE</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="../css/slides.css">
    <style>
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-bottom: 24px;
        }
        .table-section {
            background: var(--color-bg-section);
            border-radius: 8px;
            padding: 24px;
        }
        .table-section h2 {
            font-family: var(--font-display);
            font-size: 18px;
            margin-bottom: 20px;
            color: var(--color-text-primary);
        }
        .source-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 15px;
        }
        .source-table th {
            text-align: left;
            padding: 14px 12px;
            border-bottom: 2px solid var(--color-primary);
            font-family: var(--font-display);
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--color-text-secondary);
        }
        .source-table th:not(:first-child) {
            text-align: right;
        }
        .source-table td {
            padding: 16px 12px;
            border-bottom: 1px solid #eee;
            font-size: 15px;
        }
        .source-table td:not(:first-child) {
            text-align: right;
            font-family: 'SF Mono', 'Consolas', monospace;
        }
        .source-table tr:hover {
            background: #f8f9fa;
        }
        .source-name {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .source-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
        }
        .source-label {
            font-weight: 600;
            font-size: 15px;
        }
        .cvr-cell {
            font-weight: 600;
        }
        .cvr-cell.high { color: #2e7d32; }
        .cvr-cell.medium { color: #f57c00; }
        .cvr-cell.low { color: #d32f2f; }
        .aov-cell {
            color: var(--color-primary);
            font-weight: 600;
        }
        .donut-section {
            background: var(--color-bg-section);
            border-radius: 8px;
            padding: 24px;
            display: flex;
            flex-direction: column;
        }
        .donut-section h2 {
            font-family: var(--font-display);
            font-size: 18px;
            margin-bottom: 16px;
            color: var(--color-text-primary);
        }
        .callouts-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        .callout-card {
            border-radius: 8px;
            padding: 18px 20px;
        }
        .callout-card.green {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border-left: 4px solid #4caf50;
        }
        .callout-card.orange {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
        }
        .callout-card.yellow {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        .callout-card .callout-title {
            font-family: var(--font-display);
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .callout-card.green .callout-title { color: #2e7d32; }
        .callout-card.orange .callout-title { color: #e65100; }
        .callout-card.yellow .callout-title { color: #856404; }
        .callout-card .callout-text {
            font-size: 13px;
            line-height: 1.5;
        }
        .callout-card.green .callout-text { color: #1b5e20; }
        .callout-card.orange .callout-text { color: #bf360c; }
        .callout-card.yellow .callout-text { color: #856404; }
    </style>
</head>
<body>
    <div class="slide-container">
        <header class="slide-header">
            <div>
                <h1>GenAI Traffic<span class="subtitle">Source Breakdown</span></h1>
            </div>
            <span class="slide-badge">Home Entertainment | Jan 2026</span>
        </header>

        <div class="slide-content">
            <!-- Main Grid: Table Left, Donut Right -->
            <div class="main-grid">
                <!-- Left: Source Table -->
                <div class="table-section">
                    <h2>GenAI Referrer Performance</h2>
                    <table class="source-table">
                        <thead>
                            <tr>
                                <th>Source</th>
                                <th>Visits</th>
                                <th>CVR</th>
                                <th>AOV</th>
                                <th>Revenue</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="source-name">
                                        <div class="source-dot" style="background: #9e9e9e;"></div>
                                        <span class="source-label">GenAI (No referrer)*</span>
                                    </div>
                                </td>
                                <td>8,477</td>
                                <td class="cvr-cell medium">0.52%</td>
                                <td class="aov-cell">$732</td>
                                <td>$32,205</td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="source-name">
                                        <div class="source-dot" style="background: #01c3b0;"></div>
                                        <span class="source-label">ChatGPT</span>
                                    </div>
                                </td>
                                <td>2,960</td>
                                <td class="cvr-cell high">0.78%</td>
                                <td class="aov-cell">$804</td>
                                <td>$18,483</td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="source-name">
                                        <div class="source-dot" style="background: #feb447;"></div>
                                        <span class="source-label">Gemini</span>
                                    </div>
                                </td>
                                <td>287</td>
                                <td class="cvr-cell low">0.00%</td>
                                <td class="aov-cell" style="color: #feb447;">-</td>
                                <td>$0</td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="source-name">
                                        <div class="source-dot" style="background: #7c4dff;"></div>
                                        <span class="source-label">Perplexity</span>
                                    </div>
                                </td>
                                <td>284</td>
                                <td class="cvr-cell low">0.00%</td>
                                <td class="aov-cell" style="color: #7c4dff;">-</td>
                                <td>$0</td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="source-name">
                                        <div class="source-dot" style="background: #0078d4;"></div>
                                        <span class="source-label">Copilot</span>
                                    </div>
                                </td>
                                <td>90</td>
                                <td class="cvr-cell low">0.00%</td>
                                <td class="aov-cell">-</td>
                                <td>$0</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Right: Donut Chart -->
                <div class="donut-section">
                    <h2>Traffic Distribution</h2>
                    <div id="source-donut" class="chart-container" style="flex: 1; min-height: 320px;"></div>
                </div>
            </div>

            <!-- Callouts Row - Below Charts -->
            <div class="callouts-row">
                <div class="callout-card green">
                    <div class="callout-title">ChatGPT: Best Performer</div>
                    <div class="callout-text">
                        <strong>2,960 visits</strong> with <strong>0.78% CVR</strong> and $804 AOV -
                        the highest converting trackable GenAI source, driving $18.5K in HE revenue.
                    </div>
                </div>
                <div class="callout-card orange">
                    <div class="callout-title">No Referrer Attribution Gap</div>
                    <div class="callout-text">
                        <strong>69% of GenAI visits</strong> (8,477) have no referrer due to referrer stripping.
                        AI platforms often hide their origin, making attribution challenging.
                    </div>
                </div>
                <div class="callout-card yellow">
                    <div class="callout-title">Google AI Mode: Hidden Traffic</div>
                    <div class="callout-text">
                        Traffic from <strong>Google's AI Mode</strong> appears as standard organic search.
                        True GenAI traffic is likely <strong>underreported</strong>.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Source breakdown data for donut - January 2026 (HE URLs only)
        const sourceData = [
            { source: 'GenAI (No referrer)', visits: 8477, color: '#9e9e9e' },
            { source: 'ChatGPT', visits: 2960, color: '#01c3b0' },
            { source: 'Gemini', visits: 287, color: '#feb447' },
            { source: 'Perplexity', visits: 284, color: '#7c4dff' },
            { source: 'Copilot', visits: 90, color: '#0078d4' }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            renderSourceDonut();
        });

        function renderSourceDonut() {
            const container = document.getElementById('source-donut');
            const width = container.clientWidth;
            const height = 320;
            const radius = Math.min(width, height) / 2 - 30;

            const svg = d3.select('#source-donut')
                .append('svg')
                .attr('width', width)
                .attr('height', height)
                .append('g')
                .attr('transform', `translate(${width / 2}, ${height / 2})`);

            const total = d3.sum(sourceData, d => d.visits);

            const pie = d3.pie()
                .value(d => d.visits)
                .sort(null);

            const arc = d3.arc()
                .innerRadius(radius * 0.55)
                .outerRadius(radius);

            const arcs = svg.selectAll('arc')
                .data(pie(sourceData))
                .enter()
                .append('g');

            arcs.append('path')
                .attr('d', arc)
                .attr('fill', d => d.data.color)
                .attr('stroke', '#fff')
                .attr('stroke-width', 2)
                .style('cursor', 'pointer')
                .on('mouseover', function(event, d) {
                    d3.select(this).attr('opacity', 0.8);
                })
                .on('mouseout', function() {
                    d3.select(this).attr('opacity', 1);
                });

            // Center text
            svg.append('text')
                .attr('text-anchor', 'middle')
                .attr('dy', '-0.2em')
                .style('font-family', 'Samsung Sharp Sans, sans-serif')
                .style('font-size', '42px')
                .style('font-weight', '700')
                .text(total.toLocaleString());

            svg.append('text')
                .attr('text-anchor', 'middle')
                .attr('dy', '1.5em')
                .style('font-family', 'Samsung One, sans-serif')
                .style('font-size', '16px')
                .style('fill', '#666')
                .text('total visits');

            // Legend below donut
            const legend = d3.select('#source-donut')
                .append('div')
                .style('display', 'flex')
                .style('justify-content', 'center')
                .style('flex-wrap', 'wrap')
                .style('gap', '16px')
                .style('margin-top', '12px');

            sourceData.forEach(d => {
                const pct = ((d.visits / total) * 100).toFixed(0);
                const item = legend.append('div')
                    .style('display', 'flex')
                    .style('align-items', 'center')
                    .style('gap', '6px');

                item.append('div')
                    .style('width', '14px')
                    .style('height', '14px')
                    .style('border-radius', '3px')
                    .style('background', d.color);

                item.append('span')
                    .style('font-size', '13px')
                    .style('color', '#333')
                    .text(`${d.source} (${pct}%)`);
            });
        }
    </script>
</body>
</html>
